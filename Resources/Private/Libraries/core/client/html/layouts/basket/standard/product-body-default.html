<?php

/**
 * @copyright Copyright (c) Metaways Infosystems GmbH, 2012
 * @license LGPLv3, http://www.arcavias.com/en/license
 */

$priceFormat = $this->translate( 'core/client/html', '%1$sâ‚¬' );

?>
<?php foreach( $this->standardBasket->getProducts() as $position => $product ) : ?>
		<tr class="product-row">
			<td class="standard-details">
				<img src="<?php echo $product->getMediaUrl(); ?>" />
				<span class="product-name"><?php echo $product->getName(); ?></span>
<?php	foreach( $product->getAttributes() as $attribute ) : ?>
				<span class="product-attributename"><?php echo $attribute->getName(); ?></span>
				<span class="product-attributevalue"><?php echo $attribute->getValue(); ?></span>
<?php	endforeach; ?>
			</td>
			<td class="standard-quantity">
<?php	if( $product->getQuantity() > 1 ) : ?>
				<a href="<?php echo $this->url( $this->config( 'basket-target' ), 'basket', 'index', array( 'b-action' => 'edit', 'b-position' => $position, 'b-quantity' => $product->getQuantity() - 1 ) ); ?>">-</a>
<?php	endif; ?>
				<input type="text" name="<?php echo $this->formparam( array( 'b-prod', $position, 'quantity' ) ); ?>" value="<?php echo $product->getQuantity(); ?>" />
				<input type="hidden" name="<?php echo $this->formparam( array( 'b-prod', $position, 'position' ) ); ?>" value="<?php echo $position; ?>" />
				<a href="<?php echo $this->url( $this->config( 'basket-target' ), 'basket', 'index', array( 'b-action' => 'edit', 'b-position' => $position, 'b-quantity' => $product->getQuantity() + 1 ) ); ?>">+</a>
			</td>
			<td class="standard-unitprice"><?php printf( $priceFormat, $this->number( $product->getPrice()->getValue() ) ); ?></td>
			<td class="standard-price"><?php printf( $priceFormat, $this->number( $product->getPrice()->getValue() * $product->getQuantity() ) ); ?></td>
			<td class="standard-action">
				<a class="minibutton" href="<?php echo $this->url( $this->config( 'basket-target' ), 'basket', 'index', array( 'b-action' => 'delete', 'b-position' => $position ) ); ?>"><?php echo $this->translate( 'core/client/html', 'X' ); ?></a>
			</td>
		</tr>
<?php endforeach; ?>
<?php echo $this->productBody; ?>
